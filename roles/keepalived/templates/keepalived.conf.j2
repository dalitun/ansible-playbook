! Configuration File for keepalived
global_defs {
   router_id zsz
      }

vrrp_script check_mysql {
   script "/etc/keepalived/check_mysql.sh {{ master_ip }}"
   interval 2
   weight 2
}

vrrp_instance VI_1 {
      state BACKUP
      interface eth0
      virtual_router_id 51
      priority 100
      advert_int 1
      nopreempt  # only needed on higher priority node
      authentication {
      auth_type PASS
      auth_pass 1111
      }

      track_script {
        check_mysql
      }
      virtual_ipaddress {
        10.0.1.10/24 dev eth0 label eth0:1
      }

}